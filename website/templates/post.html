
<div class="container" style="margin-left: 10px; margin-right: 10px; max-width: 100%">
		<div class="q-box qu-borderAll qu-borderRadius--small qu-borderColor--raised qu-boxShadow--small qu-mb--small qu-bg--raised" style="box-sizing: border-box;">
	        <div>
	            <div>
	                <div>
	                    <div>
	                        <div class="q-box qu-pt--medium qu-hover--bg--darken" style="box-sizing: border-box; padding-left: 16px; padding-right: 16px; padding-bottom: 0px; position: relative;">
	                            <div class="q-box" style="box-sizing: border-box;">
	                                <div>
	                                    <div class="q-box" style="box-sizing: border-box;">
	                                        <div class="q-relative" style="box-sizing: border-box; position: relative;">
	                                            <div class="q-flex" style="box-sizing: border-box; display: flex;">
	                                                <div class="q-box qu-mb--small" width="100%" style="box-sizing: border-box; width: 100%;">
	                                                    <div class="q-box spacing_log_answer_header" style="box-sizing: border-box;">
	                                                        <div class="q-flex" width="100%" style="box-sizing: border-box; display: flex; align-items: start; width: 100%;">
	                                                            <div class="q-box qu-alignSelf--center qu-flex--auto" style="box-sizing: border-box; overflow-wrap: break-word;">
	                                                                <div class="q-text qu-dynamicFontSize--regular qu-truncateLines--3 qu-passColorToLinks" style="box-sizing: border-box; margin-bottom: 2px; display: inline-block">
	                                                                    <span>
	                                                                        <span class="q-box qu-display--none" style="box-sizing: border-box;"></span>
	                                                                        <span class="CssComponent-sc-1oskqb9-0 AbstractSeparatedItems___StyledCssComponent-sc-46kfvf-0 bxBZxD">
	                                                                            <span class="q-text qu-bold" style="box-sizing: border-box;">
	                                                                                <div class="q-inlineFlex qu-alignItems--center" style="box-sizing: border-box; display: inline-flex;">
	                                                                                    <div class="q-box qu-display--inline" style="box-sizing: border-box; z-index: 0;">
	                                                                                        <div class="q-box qu-display--inline" style="box-sizing: border-box;">
	                                                                                            <div class="q-relative qu-display--inline puppeteer_popper_reference" style="box-sizing: border-box; position: relative;">
	                                                                                                <div class="q-click-wrapper qu-display--inline qu-tapHighlight--white qu-cursor--pointer ClickWrapper___StyledClickWrapperBox-zoqi4f-0 bIwtPb" aria-expanded="false" aria-haspopup="dialog" tabindex="0" style="box-sizing: border-box; font: inherit; padding: 0px; color: inherit; text-align: inherit;">
	                                                                                                    <a class="q-box qu-color--gray_dark qu-cursor--pointer qu-hover--textDecoration--underline Link___StyledBox-t2xg9c-0 KlcoI" href="/mydreams" target="_blank" style="box-sizing: border-box; border-radius: inherit;">
	                                                                                                        <div class="q-inlineFlex qu-alignItems--center qu-wordBreak--break-word" style="box-sizing: border-box; display: inline-flex;"><span><span>{{ dreamer_name }}</span></span></div>
	                                                                                                    </a>
	                                                                                                </div>
	                                                                                            </div>
	                                                                                        </div>
	                                                                                    </div>
	                                                                                </div>
	                                                                            </span>
	                                                                            , <span class="q-text qu-borderWidth--retinaOverride qu-borderWidth--regular qu-wordBreak--break-word" style="box-sizing: border-box;">{{ dreamer_job }}</span>
	                                                                        </span>
	                                                                    </span>
	                                                                </div>
	                                                                <div class="q-text qu-dynamicFontSize--small qu-color--gray_light qu-passColorToLinks" style="box-sizing: border-box; display: inline-block; float: right">
	                                                                    <div class="q-box qu-display--inline VerticallyAlignedItems___StyledBox-ohbu65-0 mEida" style="box-sizing: border-box;"><span class="q-box" style="box-sizing: border-box; margin-right: auto; pointer-events: auto;"><a class="q-box Link___StyledBox-t2xg9c-0 KlcoI answer_timestamp qu-cursor--pointer qu-hover--textDecoration--underline" target="_blank" rel="nofollow" style="box-sizing: border-box; border-radius: inherit;">Posted on {{ dream_date }}</a></span><span class="q-box" style="box-sizing: border-box;"></span></div>
	                                                                    <div class="q-inline qu-verticalAlign--middle" style="box-sizing: border-box; display: inline;"></div>
	                                                                </div>
	                                                            </div>
	                                                        </div>
	                                                    </div>
	                                                </div>
	                                            </div>
	                                            <div class="q-relative" style="box-sizing: border-box; position: relative;">
	                                                <div class="q-absolute qu-full qu-cursor--pointer AnswerContent___StyledAbsolute-sc-1jekuxm-0 iUOaNB" style="box-sizing: border-box; position: absolute;"></div>
	                                            </div>
	                                        </div>
	                                        <div class="q-click-wrapper qu-display--block qu-tapHighlight--none qu-cursor--pointer ClickWrapper___StyledClickWrapperBox-zoqi4f-0 bIwtPb" width="100%" tabindex="0" style="box-sizing: border-box; font: inherit; padding: 0px; width: 100%; position: relative; color: inherit; text-align: inherit;">
	                                            <div class="q-box spacing_log_answer_content puppeteer_test_answer_content" style="box-sizing: border-box;">
	                                                <div class="q-box qu-cursor--pointer QTextTruncated___StyledBox-sc-1pev100-0 ejgusd" style="box-sizing: border-box;">
	                                                    <div class="q-text qu-wordBreak--break-word" style="box-sizing: border-box;">
	                                                        <span class="q-box qu-userSelect--text" style="box-sizing: border-box;">
	                                                            <p class="q-text qu-display--block qu-wordBreak--break-word qu-textAlign--start" style="box-sizing: border-box; margin-bottom: 1em; overflow-wrap: anywhere; direction: ltr;"><span style="font-weight: normal; font-style: normal; background: none;">{{ dream_content }}</span></p>
                                                                {% if user_bg != '' %}
                                                                <p class="q-text qu-display--block qu-wordBreak--break-word qu-textAlign--start" style="box-sizing: border-box; margin-bottom: 1em; overflow-wrap: anywhere; direction: ltr;"><span style="font-weight: normal; font-style: normal; background: none;"><b>Background Info: </b>{{ user_bg }}</span></p>
                                                                {% endif %}
                                                                {% if wakeup_st != '' %}
                                                                <p class="q-text qu-display--block qu-wordBreak--break-word qu-textAlign--start" style="box-sizing: border-box; margin-bottom: 1em; overflow-wrap: anywhere; direction: ltr;"><span style="font-weight: normal; font-style: normal; background: none;"><b>State after waking up: </b>{{ wakeup_st }}</span></p>
	                                                            {% endif %}
                                                            </span>
	                                                    </div>
	                                                </div>
	                                            </div>
	                                        </div>
	                                    </div>
	                                    <div class="q-box" style="box-sizing: border-box;"></div>
	                                </div>
	                            </div>
	                        </div>
							<form method="POST">
								<table style="width: 97%; margin-left: 15px; margin-right: 15px; margin-bottom: 15px">
								<tr>
								<td style="width: 95%; margin-left: 10px">
								<input type="hidden" id="dreamid" name="dreamid" value={{ dreamid }}>
								<textarea style="overflow: hidden" name="comment" id="comment" class="form-control q-box qu-p--medium comment-pane" placeholder="Add your interpretation 	..." style="border-radius: 10px"></textarea>
								</td>
								<td style="width: 10%; margin-left: 15px">
								<div align="right">
									<button type="submit" id="submit" name="submit" value={{ dreamid }} style="background-color:#FFFFFF; border-color: #FFFFFF; border-width: 0px; margin-top: 10px">
										<img src="./../static/images/send.png" alt="Submit" width="48" height="48"/>
									</button>
								</div>
								</td>
								</tr>
								</table>
							</form>
							<div class="q-box qu-p--medium comment-pane" style="box-sizing: border-box; ">
                                <h6 style="text-shadow: rgb(0, 0, 0, 0.6) 1px 1px 1px; display: inline-block">Dreami's interpretation</h6>
								<div style="display: inline-block; float: right"><b>Helpfulness: {{helpfulness if helpfulness else '__'}}/5 &nbsp; &nbsp; Insights: {{reflection if reflection else '__'}}/5</b></div>
                                <p>{{ dreami_inter }}</p>
                            </div>
							<form method="POST" id="rating-form">

									{% for comment in all_comments %}
									  {% if comment.dream_id == dreamid %}
										<li class="list-group-item background-transp" style="border-radius: 10px; margin-left: 10px; margin-right: 10px">

											{% for user in all_users %}
											{% if comment.commenter_id==user.id %}
											<h6 style="display: inline-block; margin-right: 10px"><b>{{ user.first_name }}</b></h6>
											<div class="q-text qu-dynamicFontSize--small qu-color--gray_light qu-passColorToLinks" style="box-sizing: border-box; display: inline-block">
	                                                                    <div class="q-box qu-display--inline VerticallyAlignedItems___StyledBox-ohbu65-0 mEida" style="box-sizing: border-box;"><span class="q-box" style="box-sizing: border-box; margin-right: auto; pointer-events: auto;"><a class="q-box Link___StyledBox-t2xg9c-0 KlcoI answer_timestamp qu-cursor--pointer qu-hover--textDecoration--underline" target="_blank" rel="nofollow" style="box-sizing: border-box; border-radius: inherit;">Replied on {{ comment.date }}</a></span><span class="q-box" style="box-sizing: border-box;"></span></div>
	                                                                    <div class="q-inline qu-verticalAlign--middle" style="box-sizing: border-box; display: inline;"></div>
	                                                                </div>
											{% endif %}
											{% endfor %}
											<p>{{ comment.data }}</p>
												<div>
													<div style="display: inline-block">
													{% set current_user_vote = upvote.query.filter_by(upvoter_id=user.id, comment_id=comment.id).order_by(upvote.id.desc()).first().vote %}
													{% set comment_vote_list = [100] %}
													{% set voter_count = namespace(value=0) %}
													{% set vote_sum = namespace(value=0) %}

													{% for voter in all_users %}
														{% set all_user_vote = upvote.query.filter_by(comment_id=comment.id, upvoter_id=voter.id).order_by(upvote.id.desc()).first() %}
														{% if all_user_vote %}
															{% set vote_sum.value = vote_sum.value + all_user_vote.vote %}
															{% set voter_count.value = voter_count.value + 1 %}
														{% endif %}
													{% endfor %}
												<td><h6><b>Your Rating: {{ current_user_vote }} &nbsp;&nbsp; Avg. Rating: {{vote_sum.value/voter_count.value if voter_count.value>0}} </b></h6></td>
													</div>
														<div style="display: inline-block; float: right;"><b>Enter rating:</b> {% include 'rating.html' %}</div>
												</div>

										</li>
									  {% endif %}
									{% endfor %}

							</form>
						</div>
	                </div>
	            </div>
	        </div>
	    </div>
    </div>
